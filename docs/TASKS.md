# –ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞

> üìù **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:** —Å–º. [CHANGELOG.md](CHANGELOG.md)
> üìã **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-26

---

## üéØ –°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è (—Ç–æ–ø-3 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞)

1. **[3.6] –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ TDLib** - type-safe API –≤–º–µ—Å—Ç–æ `[String: Any]`
2. **[3.4] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ TDLibAdapter** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
3. **[3.7] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏** - DI, –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, mock-–æ–±—ä–µ–∫—Ç—ã

---

## üìä High Priority

### 3.6 –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ TDLib (Type-Safe API)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ–º `[String: Any]` - –Ω–µ—Ç type-safety, –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –≤–æ–∑–º–æ–∂–Ω—ã –æ–ø–µ—á–∞—Ç–∫–∏.

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã `TDLibRequest`, `TDLibResponse`
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤: `GetMe`, `SetTdlibParameters`, `CheckAuthenticationCode` –∏ –¥—Ä.
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤: `User`, `Error`, `AuthorizationState`
- [ ] –°–æ–∑–¥–∞—Ç—å `TDLibRequestEncoder` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã `send()` –∏ `receive()` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

**–°—Å—ã–ª–∫–∏:**
- [–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](CHANGELOG.md#2025-10-26-—É—Ç—Ä–æ)

---

### 3.4 –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ TDLibAdapter

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `TDLibClient` (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, thread-safety, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `start()` (async/await, continuation)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `processAuthorizationStates()` (state machine, –¥–∏–∞–≥—Ä–∞–º–º–∞)
- [ ] –û–±—ä—è—Å–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON-—Å–æ–æ–±—â–µ–Ω–∏–π TDLib
- [ ] Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –º–µ—Å—Ç–∞–º (`await Task.yield()`, `@unchecked Sendable`)

---

### 3.7 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏ (Dependency Injection)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ C API, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª `TDLibClientProtocol`
- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Å–ª–æ–∏: `TDLibClient` (C API) + `TDLibAuthorizationHandler` (–ª–æ–≥–∏–∫–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å `MockTDLibClient` –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- [ ] –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –æ—à–∏–±–∫–∏, edge cases

---

## üìã Normal Priority

### 3.2 –í—ã–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TDLib –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

- [ ] –°–æ–∑–¥–∞—Ç—å `Sources/TDLibAdapter/TDLibParameters.swift`
- [ ] Static –º–µ—Ç–æ–¥ `buildParameters(from config: TDConfig) -> [String: Any]`
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ + –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ inline —Ñ–æ—Ä–º–∞—Ç–∞ (TDLib 1.8.6+)

---

### 1.1 –°–æ–∑–¥–∞—Ç—å EnvironmentService –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é

- [ ] –ü—Ä–æ—Ç–æ–∫–æ–ª `EnvironmentServiceProtocol`
- [ ] `ProcessInfoEnvironmentService` –¥–ª—è macOS/Linux
- [ ] `AppConfiguration` struct –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –†–µ—à–∏—Ç—å: `stateDir` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π?
- [ ] –ü–æ–¥—É–º–∞—Ç—å –æ Windows/Docker –ø–æ–¥–¥–µ—Ä–∂–∫–µ (XDG paths)

---

### 4.1 –ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (MVP –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

- [ ] Heartbeat –º–µ—Ö–∞–Ω–∏–∑–º (–∑–∞–ø–∏—Å—å timestamp –≤ —Ñ–∞–π–ª)
- [ ] Health check —Å–∫—Ä–∏–ø—Ç (`/usr/local/bin/tg-client-healthcheck.sh`)
- [ ] Telegram Self-Monitoring (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Bot API)
- [ ] Cron –∑–∞–¥–∞—á–∞ –¥–ª—è healthcheck
- [ ] Logrotate –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
- [ ] Structured logging (JSON —Ñ–æ—Ä–º–∞—Ç)

---

## üí° Low Priority

### 3.5 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ TDLibAdapter –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤

- [ ] `TDLibClient.swift` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
- [ ] `TDLibClient+Authorization.swift` - extension —Å –ª–æ–≥–∏–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] `TDLibClient+Logging.swift` - extension —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 1.2 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–∏–∞–ª–æ–≥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

- [ ] –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∑–∞–ø—Ä–æ—Å–∞ credentials –≤ `AuthenticationDialog`
- [ ] –ú–µ—Ç–æ–¥—ã: `askPhone()`, `askCode()`, `askPassword()`
- [ ] `AuthenticationDialogProtocol` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 1.3 –£–ª—É—á—à–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ `getMe`

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–ø–æ—Ä–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è polling'–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º.

- [ ] –ò–∑—É—á–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º `@extra` –≤ TDLib –¥–ª—è request-response –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã: async continuation, `AsyncStream`, promise/future
- [ ] –í—ã–Ω–µ—Å—Ç–∏ polling –≤ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é

---

### 3.9 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ TL —Å—Ö–µ–º—ã

**–¶–µ–ª—å:** –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä Swift –∫–æ–¥–∞ –∏–∑ `td_api.tl` –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏.

- [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è (TDLibKit, TDLib-iOS)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π TL –ø–∞—Ä—Å–µ—Ä
- [ ] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä Swift –∫–æ–¥–∞ (Request/Response types)
- [ ] –í—ã–±–æ—Ä–æ—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ `tl-generator.yml`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–ª–¥-–ø—Ä–æ—Ü–µ—Å—Å–æ–º (SPM plugin)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è 3.6 (–±–∞–∑–æ–≤–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è)

---

### 4.2 –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] HTTP Health Endpoint (–ø–æ—Ä—Ç 8080)
- [ ] Metrics –≤ —Ñ–∞–π–ª –¥–ª—è Prometheus
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª–æ–≥–æ–≤ (lnav ‚Üí Grafana Loki)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ 4.1

---

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- [ ] –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø—Ä–æ–º–ø—Ç—ã, –æ—à–∏–±–∫–∏)
- [ ] –í–∞—Ä–∏–∞–Ω—Ç—ã: Swift enum/struct, .strings —Ñ–∞–π–ª—ã, JSON/YAML

---

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏

### 2. C-–∑–∞–≥–æ–ª–æ–≤–∫–∏ (`shim.h`) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ 2025-10-24
**–ö–æ–º–º–∏—Ç:** `b9b1be0`

–ü–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º C interop –¥–ª—è TDLib.

**–î–µ—Ç–∞–ª–∏:** [CHANGELOG.md](CHANGELOG.md#2025-10-24)

---

### 3.3 Deprecated —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ 2025-10-24
**–ö–æ–º–º–∏—Ç:** `e5832a8`

–ó–∞–º–µ–Ω–µ–Ω—ã deprecated —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JSON API —á–µ—Ä–µ–∑ `td_execute()`.

**–î–µ—Ç–∞–ª–∏:** [CHANGELOG.md](CHANGELOG.md#2025-10-24)

---

### 3.8 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ 2025-10-26
**–ö–æ–º–º–∏—Ç:** `dc886d4`

–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è, type-safe enums, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã.

**–î–µ—Ç–∞–ª–∏:** [CHANGELOG.md](CHANGELOG.md#2025-10-26-—É—Ç—Ä–æ)

---

## ü§î –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

1. **stateDir**: –æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å –¥–µ—Ñ–æ–ª—Ç–æ–º `~/.tdlib` –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º?
2. **Windows**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Windows –≤ –±—É–¥—É—â–µ–º?
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–æ–±–∞–≤–ª—è—Ç—å —É—Ä–æ–≤–Ω–∏ (debug mode)?
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ª–∏ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã? (–≤–ª–∏—è–µ—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-19
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-26
