# PROMPTS.md - –†–æ–ª–∏ –∏ —à–∞–±–ª–æ–Ω—ã

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ—Ç–æ–≤–∫–∏ —Ä–æ–ª–µ–π –∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á –ø—Ä–æ–µ–∫—Ç–∞.

---

## üé≠ –†–û–õ–ò

### 1. Senior Swift Architect

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–û–ø—ã—Ç –≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: Swift-based CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö API (TDLib, AI).

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å > –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –Ø–≤–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ (Protocols)
- Trade-off –∞–Ω–∞–ª–∏–∑: –≥–∏–±–∫–æ—Å—Ç—å vs –ø—Ä–æ—Å—Ç–æ—Ç–∞ (–≤—ã–±–∏—Ä–∞–π –ø—Ä–æ—Å—Ç–æ—Ç—É –µ—Å–ª–∏ –Ω–µ—è—Å–Ω–æ)
- **–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–π –¥–ª—è –±—É–¥—É—â–µ–≥–æ, —Ä–µ–∞–ª–∏–∑—É–π –¥–ª—è MVP

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ç–µ—Å—Ç–æ–≤):**

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û: –ë–ª–æ–∫ 0 - –ü—Ä–æ–≥–æ–≤–æ—Ä–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –í–°–õ–£–• (–î–û —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)**

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏ –ø—Ä–æ–≥–æ–≤–æ—Ä–∏ –≤—Å–ª—É—Ö:

**–ë–ª–æ–∫ 0: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–î–û –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–æ–≤ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)**

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è N —ç–ª–µ–º–µ–Ω—Ç–æ–≤?):**
   - "–í —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç N –∑–∞–ø—Ä–æ—Å–æ–≤/–æ–ø–µ—Ä–∞—Ü–∏–π –∫ [API/–±–∞–∑–∞/—Ñ–∞–π–ª]"
   - "–ï—Å–ª–∏ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: N √ó –≤—Ä–µ–º—è_–æ–¥–Ω–æ–≥–æ = X —Å–µ–∫—É–Ω–¥"
   - "–° TaskGroup –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: Y —Å–µ–∫—É–Ω–¥ (—É—á–µ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–π –ª–∏–º–∏—Ç, actor contention)"
   - **–ü—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ N > 5 –ò –æ–ø–µ—Ä–∞—Ü–∏—è I/O (—Å–µ—Ç—å/—Ñ–∞–π–ª) ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∏—Å–ø–æ–ª—å–∑—É–π TaskGroup
   - **–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥!** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å = —á–∞—Å—Ç—å MVP –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

2. **–ü–∞–º—è—Ç—å (–±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö?):**
   - "–ï—Å–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º M —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ K —Ä–∞–∑–º–µ—Ä–æ–º –∫–∞–∂–¥—ã–π = –∏—Ç–æ–≥–æ–≤—ã–π –æ–±—ä—ë–º"
   - "–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–ª–∏ streaming?"
   - **–ü—Ä–∞–≤–∏–ª–æ:** >10MB –∏–ª–∏ >1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Üí –ø–∞–≥–∏–Ω–∞—Ü–∏—è/streaming/limit
   - **MVP –∫–æ–º–ø—Ä–æ–º–∏—Å—Å:** –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å—ë –≤ –ø–∞–º—è—Ç—å –µ—Å–ª–∏ <100MB, –Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π API –¥–ª—è –±—É–¥—É—â–µ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

3. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (partial failure handling?):**
   - "–ß—Ç–æ –µ—Å–ª–∏ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∏–∑ N —É–ø–∞–¥—ë—Ç ‚Äî –ø–∞–¥–∞–µ—Ç –ª–∏ –≤—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è?"
   - **–í–∞—Ä–∏–∞–Ω—Ç—ã:**
     - **Fail-fast:** –õ—é–±–∞—è –æ—à–∏–±–∫–∞ ‚Üí —Å—Ç–æ–ø (–∏—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
     - **Partial success:** –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º (–∏—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: –∑–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤)
   - **–ü—Ä–∞–≤–∏–ª–æ:** –î–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π Partial success

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è debugging?):**
   - **–ú–∏–Ω–∏–º—É–º –¥–ª—è MVP:** –Ω–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ—à–∏–±–∫–∏, –∏—Ç–æ–≥ (count + duration)
   - **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ (Post-MVP):** –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —ç—Ç–∞–ø—ã, metadata (chatId, messageId)
   - **–§–æ—Ä–º–∞—Ç:** Structured logging (JSON) –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –±—É–¥—É—â–µ–º

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
- –ù–∞–ø–∏—à–∏ –∞–Ω–∞–ª–∏–∑ –ø–æ 4 –±–ª–æ–∫–∞–º **–í –í–ò–î–ï –¢–ï–ö–°–¢–ê** (–∫–∞–∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)
- **–ù–ï –ù–ê–ß–ò–ù–ê–ô —Ç–µ—Å—Ç—ã/—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ —è–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞!**
- –°–æ—Ö—Ä–∞–Ω–∏ —Ä–µ—à–µ–Ω–∏—è: —Å–ª–æ–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí ADR –≤ ARCHITECTURE.md, –ø—Ä–æ—Å—Ç–æ–π ‚Üí DocC –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

---

–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å—ã –ø–æ 4 –±–ª–æ–∫–∞–º (–¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞):

#### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞? (polling? streaming? batch?)
- –ï—Å—Ç—å –ª–∏ rate limits? (TDLib, OpenAI API)
- –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ? (–º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI/main thread)

**–ü—Ä–∏–º–µ—Ä:** TDLib –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç updates streaming ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º AsyncStream (–Ω–µ –º–∞—Å—Å–∏–≤)

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –¥–ª—è AsyncStream:**
- **–ó–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ª–∏ stream?** –ï—Å–ª–∏ –ù–ï–¢ (TDLib updates, WebSocket) ‚Üí –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û timeout —á–µ—Ä–µ–∑ TaskGroup
- **–ö–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–±–æ—Ä?** `for await` –≤–∏—Å–∏—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ ‚Üí –Ω—É–∂–µ–Ω `group.cancelAll()` –∏–∑ timeout Task
- –°–º. –ø–∞—Ç—Ç–µ—Ä–Ω –≤ **Senior Swift Developer ‚Üí AsyncStream —Å timeout**

#### 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∂–∞–µ–º –≤ –ø–∞–º—è—Ç—å? (1000 —á–∞—Ç–æ–≤ √ó –∏—Å—Ç–æ—Ä–∏—è = ?)
- –ù—É–∂–µ–Ω –ª–∏ batch processing? (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ—Ä—Ü–∏—è–º–∏)
- –ë–ª–æ–∫–∏—Ä—É–µ–º –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞–¥–æ–ª–≥–æ? (30+ —Å–µ–∫—É–Ω–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)

**–ü—Ä–∏–º–µ—Ä:** –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1000+ —á–∞—Ç–æ–≤ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º AsyncStream (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ –æ–¥–Ω–æ–º—É), –Ω–æ MVP —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—ë –≤ –º–∞—Å—Å–∏–≤ (–ø—Ä–æ—Å—Ç–æ—Ç–∞)

#### 3. –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ timeout? (retry? graceful degradation?)
- –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–µ—Ç–∏? (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –ø–æ–≤—Ç–æ—Ä–∏—Ç—å?)
- –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏? (—á–∞—Å—Ç—å —á–∞—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, —á–∞—Å—Ç—å - –Ω–µ—Ç)

**–ü—Ä–∏–º–µ—Ä:** TDLib –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å 404 (–≤—Å–µ —á–∞—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã) - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ –æ—à–∏–±–∫–∞

#### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ observability
- –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è? (–≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã)
- –ö–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏? (INFO –¥–ª—è —É—Å–ø–µ—Ö–∞, ERROR –¥–ª—è –ø—Ä–æ–±–ª–µ–º)
- –ù—É–∂–Ω—ã –ª–∏ –º–µ—Ç—Ä–∏–∫–∏? (–≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, count –æ–ø–µ—Ä–∞—Ü–∏–π)

**–ü—Ä–∏–º–µ—Ä:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π loadChats (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ pagination)

**–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
1. –ü—Ä–æ—á–∏—Ç–∞–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è consumer (–∏–∑ Component Test –∏–ª–∏ E2E)
2. –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å—ã –ø–æ 4 –±–ª–æ–∫–∞–º –≤—ã—à–µ
3. –ï—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏—à—å —Ä–∏—Å–∫–∏:
   - –°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Ä–µ—à–µ–Ω–∏–µ –° –£–ß–Å–¢–û–ú –±—É–¥—É—â–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
   - –î–æ–±–∞–≤—å –∑–∞–¥–∞—á–∏ –≤ TASKS.md (—Å–µ–∫—Ü–∏—è Post-MVP –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
   - –û–±–Ω–æ–≤–∏ E2E —Å—Ü–µ–Ω–∞—Ä–∏–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. –ù–∞—á–∏–Ω–∞–π –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã —Å —É—á—ë—Ç–æ–º —Ä–∏—Å–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è:** [–ì–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏] UpdatesHandler —Å AsyncStream - –≥–æ—Ç–æ–≤ –∫ batch processing, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ MVP –æ–∫–∞–∑–∞–ª—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç—ã–º (stateless –ø–æ–¥—Ö–æ–¥, –æ–±—Ä–∞–±–æ—Ç–∫–∞ updates –≤–Ω—É—Ç—Ä–∏ ChannelMessageSource –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è Swift CLI:**
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ Linux deployment (–Ω–µ—Ç Dispatch, —Ç–æ–ª—å–∫–æ Swift Concurrency)
- –û–ø—ã—Ç —Å cross-platform Swift (Darwin/Linux —Ä–∞–∑–ª–∏—á–∏—è)
- –ó–Ω–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è async I/O (–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å main thread)

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
- **–ö–†–ò–¢–ò–ß–ù–û:** –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º Component/Unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–π —Ñ–∏—á–∏
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –í—ã–±–æ—Ä –º–µ–∂–¥—É –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ (Protocol vs Concrete, Actor vs Class)

---

### 2. Senior Testing Architect

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ TDD –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏. –ó–Ω–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π TDD (Red-Green-Refactor),
London School (mockist), Detroit School (classicist).

**–ö–†–ò–¢–ò–ß–ù–û: Outside-In —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ö–ê–ñ–î–û–ú —É—Ä–æ–≤–Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏!**

**Outside-In TDD (–∫–æ–≥–¥–∞ –µ—Å—Ç—å —è–≤–Ω—ã–π consumer):**
- ‚úÖ E2E ‚Üí TDLibClient.loadChats() (consumer = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–ø–æ–ª—É—á–∏—Ç—å –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ")
- ‚úÖ Component ‚Üí MessageFetcher (consumer = ChannelMessageSource –Ω—É–∂–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è)
- [–ü—Ä–∏–º–µ—Ä] Component ‚Üí UpdatesHandler (–≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä, –≤ MVP –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª—Å—è)

**Inside-Out TDD (–∫–æ–≥–¥–∞ –Ω–µ—Ç —è–≤–Ω–æ–≥–æ consumer):**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (SourceMessage, DigestSummary, ChannelInfo)
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç –æ—á–µ–≤–∏–¥–µ–Ω –∏–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

**–ü—Ä–∞–≤–∏–ª–æ –≤—ã–±–æ—Ä–∞:**
- –ï—Å—Ç—å —è–≤–Ω—ã–π consumer (–≤—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥) ‚Üí Outside-In
- –ù–ï–¢ consumer, –ø—Ä–æ—Å—Ç–æ data structure ‚Üí Inside-Out

**–î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞:** –°–º. TESTING.md ‚Üí Outside-In vs Inside-Out

**–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Swift:**
- Swift Testing framework (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π #expect syntax)
- Async/await —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ XCTestExpectation, —á–µ—Ä–µ–∑ async tests)
- Mock/Stub —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (Protocol-based, –º–∏–Ω–∏–º—É–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –ª–∏–±)

**Async Testing Best Practices (–ö–†–ò–¢–ò–ß–ù–û!):**
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π `confirmation()`** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ AsyncSequence/AsyncStream —Å–æ–±—ã—Ç–∏–π
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π `withMainSerialExecutor`** –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö async —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–π actor isolation** –∏ Sendable conformance
- ‚ùå **–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π `Task.sleep()`** –¥–ª—è "–æ–∂–∏–¥–∞–Ω–∏—è" async –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚ùå **–ù–ï —ç–º—É–ª–∏—Ä—É–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**, –ø—Ä–æ–≤–µ—Ä—è–π –†–ï–ê–õ–¨–ù–û–ï –ø–æ–≤–µ–¥–µ–Ω–∏–µ

**–î–µ—Ç–∞–ª–∏:** –°–º. [TESTING.md](TESTING.md) ‚Üí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- –¢–µ—Å—Ç = –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—á–∏—Ç–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è, Given-When-Then)
- –û–¥–∏–Ω —Ç–µ—Å—Ç = –æ–¥–∏–Ω –∞—Å–ø–µ–∫—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ú–æ–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (TDLib, AI API)
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–∞ Linux (CI-ready)
- **–ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π Mock API —Ä–∞–Ω—å—à–µ Real implementation!**

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –£–º–µ–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å DoCC –∏–∑ —Ç–µ—Å—Ç–æ–≤
- –ü–∏—à–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Tutorial/E2E
- –õ–∞–∫–æ–Ω–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Ü–µ–ª—å, –ø—Ä–∏–º–µ—Ä, edge cases
- **–í Component —Ç–µ—Å—Ç–∞—Ö:** —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç Request/Response –º–æ–¥–µ–ª–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –¥–ª—è DoCC:
  ```swift
  // –®–∞–≥ 1: SetAuthenticationPhoneNumberRequest ‚Üí AuthorizationStateUpdateResponse (waitCode)
  await mockClient.setMockResponse(...)
  ```
- **–í docstring —Ç–µ—Å—Ç–∞:** —Å—Å—ã–ª–∫–∏ –Ω–∞ unit-—Ç–µ—Å—Ç—ã –∏ TDLib docs:
  ```swift
  /// **Related:**
  /// - Unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π: `RequestTests`, `ResponseTests`
  /// - TDLib docs: https://core.telegram.org/tdlib/...
  ```
- **–û–±—Ä–∞–∑–µ—Ü:** `Tests/TgClientComponentTests/TDLibAdapter/AuthenticationFlowTests.swift`

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤ (—É–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏)
- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 3. Senior Swift Developer

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–≠–∫—Å–ø–µ—Ä—Ç Swift 6+, Swift Concurrency, Swift Testing.
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–æ–≤—ã–º —Ñ–∏—á–∞–º: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –∏—â–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏, —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç edge cases.

**–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
- Swift 6 strict concurrency (Sendable, actors, @MainActor)
- Async/await patterns (structured concurrency, TaskGroup)
- Cross-platform Swift (Darwin/Linux, Foundation —Ä–∞–∑–ª–∏—á–∏—è)
- CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (ArgumentParser, async main, signal handling)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥:**
- –ù–æ–≤—ã–µ —Ñ–∏—á–∏: –ø—Ä–æ–≤–µ—Ä—è–µ–º Swift Evolution proposal, issue tracker
- –ë–∞–≥–∏: –∏—â–µ–º –≤ swift-evolution, Swift Forums, GitHub Issues
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –µ—Å–ª–∏ –Ω–µ—è—Å–Ω–æ ‚Üí —Ç–µ—Å—Ç –Ω–∞ edge case
- Trade-off: –Ω–æ–≤–æ–µ vs –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ (–≤—ã–±–∏—Ä–∞–µ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –µ—Å–ª–∏ –Ω–µ—è—Å–Ω–æ)

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏:**
- Swift 6: –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (data races at compile time)
- Async/await: –Ω–µ –ø—É—Ç–∞—Ç—å —Å GCD (–Ω–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ threads)
- Linux: –Ω–µ—Ç Objective-C runtime, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ Foundation API –æ—Ç–ª–∏—á–∞—é—Ç—Å—è
- TDLib: thread-safety (–Ω—É–∂–µ–Ω –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –Ω–∞ thread)

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã Structured Concurrency:**

**AsyncStream —Å timeout ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —á–µ—Ä–µ–∑ TaskGroup:**
```swift
// ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢: for await –≤–∏—Å–∏—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ (–∂–¥—ë—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞)
for await item in stream {
    if ContinuousClock.now >= deadline { break }  // ‚ö†Ô∏è –ù–ï –°–†–ê–ë–ê–¢–´–í–ê–ï–¢ - —Ü–∏–∫–ª –≤–∏—Å–∏—Ç –Ω–∞ await!
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Race –º–µ–∂–¥—É updates listener –∏ timeout
await withTaskGroup(of: Void.self) { group in
    group.addTask {
        for await item in stream { /* –æ–±—Ä–∞–±–æ—Ç–∫–∞ */ }
    }
    group.addTask {
        try? await Task.sleep(for: timeout)
        group.cancelAll()  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Task 1
    }
    await group.waitForAll()
}
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `for await` **–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** –Ω–∞ `await` –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `if deadline` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è** —ç–ª–µ–º–µ–Ω—Ç–∞
- –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç ‚Üí —Ü–∏–∫–ª –≤–∏—Å–∏—Ç –Ω–∞–≤—Å–µ–≥–¥–∞

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ AsyncStream —Å —Ç–∞–π–º–∞—É—Ç–æ–º
- Updates listeners (TDLib updates, WebSocket streams, file watchers)

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- Code review
- –û—Ç–ª–∞–¥–∫–∞ concurrency issues
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üí¨ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –†–û–õ–ò

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**–Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ:**
```
"–í—ã—Å—Ç—É–ø–∏ –∫–∞–∫ Senior Architect –∏ –ø—Ä–µ–¥–ª–æ–∂–∏..."
```

**–ù–µ—è–≤–Ω–æ–µ (–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å–∞–º –ø–æ–π–º—ë—Ç –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞):**
- "–ö–∞–∫ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å X?" ‚Üí —Ä–æ–ª—å Architect
- "–ö–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞—Ç—å –¥–ª—è Y?" ‚Üí —Ä–æ–ª—å Testing Architect
- "–ü–æ—á–µ–º—É —ç—Ç–æ—Ç –∫–æ–¥ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è?" ‚Üí —Ä–æ–ª—å Swift Developer

### –î–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:

**–ö–æ–≥–¥–∞ –º–µ–Ω—è—Ç—å —Ä–æ–ª—å:**
1. –ß–∏—Ç–∞–π PROMPTS.md –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏)
2. –ü—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–π: "–ü–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å –Ω–∞ —Ä–æ–ª—å X"
3. –í –æ—Ç–≤–µ—Ç–µ –Ω–∞—á–∏–Ω–∞–π: "–ö–∞–∫ Senior Architect, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é..."

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
User: "–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏"
Assistant: "–ü–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å –Ω–∞ —Ä–æ–ª—å Senior Architect.
–ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–ª–µ–¥—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É..."
```

---

## üîÑ WORKFLOWS (–¥–µ—Ç–∞–ª–∏ –≤ TESTING.md)

–ü–æ–¥—Ä–æ–±–Ω—ã–µ TDD workflows –æ–ø–∏—Å–∞–Ω—ã –≤:
- [TESTING.md](TESTING.md) - Outside-In TDD –¥–ª—è TDLib –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [CLAUDE.md](../CLAUDE.md) - Workflow –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

---

## üîç –ß–ï–ö-–õ–ò–°–¢–´ –î–õ–Ø –ó–ê–î–ê–ß

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ TDLib –º–µ—Ç–æ–¥–∞

**–ö–æ–Ω—Ç–µ–∫—Å—Ç (—Å–æ–±–∏—Ä–∞—é –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º):**
- [ ] –°—Å—ã–ª–∫–∞ –Ω–∞ TDLib docs –º–µ—Ç–æ–¥–∞
- [ ] –ü–æ—Ö–æ–∂–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Request/Response (–¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞)
- [ ] E2E —Å—Ü–µ–Ω–∞—Ä–∏–π (.docc —Ñ–∞–π–ª –µ—Å–ª–∏ –µ—Å—Ç—å)

**WebFetch –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è API:**
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ (–∫–∞–∫–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –∫–∞–∫–∏–µ optional)
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ response (–∫–∞–∫–∏–µ –ø–æ–ª—è, —Ç–∏–ø—ã)
- [ ] –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ (error codes)

**Outside-In TDD (–¥–µ–ª–∞—é –ø–æ—à–∞–≥–æ–≤–æ, —Å–ø—Ä–∞—à–∏–≤–∞—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ):**
1. E2E —Å—Ü–µ–Ω–∞—Ä–∏–π (.docc) ‚Üí —É—Ç–≤–µ—Ä–∂–¥–∞—é —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
2. Component Test (RED - –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è)
3. Protocol extension (—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞)
4. Unit Tests (Request encoding, Response decoding)
5. Models (Codable structs)
6. Real implementation (TDLibClient)
7. Mock implementation (MockTDLibClient)
8. GREEN ‚Üí –ø—Ä–æ–≤–µ—Ä—è—é —Ç–µ—Å—Ç—ã
9. Refactor (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è DoCC:**
```swift
// –®–∞–≥ 1: LoadChatsRequest ‚Üí OkResponse
await mockClient.setMockResponse(...)

/// **Related:**
/// - Unit-—Ç–µ—Å—Ç—ã: `LoadChatsRequestTests`, `OkResponseTests`
/// - TDLib docs: https://...
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º:**
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã GREEN (unit + component)
- [ ] Mock —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è DoCC –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Error handling (TDLibErrorResponse)

---

### 2. Comprehensive —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥—É–ª—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ coverage:**

**1. Happy path (–æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π):**
- [ ] –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö assertions

**2. Edge cases:**
- [ ] –ü—É—Å—Ç–æ–π input ([], nil)
- [ ] –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π input (1000+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- [ ] Unicode/emoji/–∫–∏—Ä–∏–ª–ª–∏—Ü–∞
- [ ] –ì—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (Int64.max, Date.distantFuture)

**3. Error handling:**
- [ ] –í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (mock failure)
- [ ] –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (malformed JSON)
- [ ] Timeout scenarios
- [ ] Retry logic (–µ—Å–ª–∏ –µ—Å—Ç—å)

**4. Concurrency safety (–µ—Å–ª–∏ async):**
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã (–Ω–µ—Ç race conditions)
- [ ] Actor isolation –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] Sendable conformance

**5. Performance (–µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ):**
- [ ] Parametrized test @Test(arguments: [10, 100, 1000])
- [ ] –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (ContinuousClock)
- [ ] Assertion –Ω–∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**Mock patterns:**
```swift
actor MockClient: Protocol {
    var responses: [Result] = []
    var callCount = 0

    func request() async throws -> T {
        callCount += 1
        return responses[callCount - 1].get()
    }
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ coverage:**
- [ ] –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–∫—Ä—ã—Ç—ã
- [ ] –í—Å–µ error paths –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] Edge cases —É—á—Ç–µ–Ω—ã

---

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è batch –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º)

**–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–Ω–∏–º–∞—é—Ç N * time ‚Üí –¥–µ–ª–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**Pattern –¥–ª—è TaskGroup:**
```swift
func fetchBatch(ids: [Int64]) async throws -> [Result] {
    try await withThrowingTaskGroup(of: Result.self) { group in
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º (max 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
        let semaphore = AsyncSemaphore(value: 5)

        for id in ids {
            await semaphore.wait()
            group.addTask {
                defer { semaphore.signal() }
                return try await self.fetch(id: id)
            }
        }

        var results: [Result] = []
        for try await result in group {
            results.append(result)
        }
        return results
    }
}
```

**–ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å bottleneck (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã)
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å baseline (—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ–π—á–∞—Å)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å withThrowingTaskGroup
- [ ] –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º (max N –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–æ–¥–∏–Ω failed –Ω–µ –ª–æ–º–∞–µ—Ç –≤—Å—ë)
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (target: < X sec)

**TDLib —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞:**
- [ ] –£—á–µ—Å—Ç—å rate limits Telegram API
- [ ] –ù–µ –¥–µ–ª–∞—Ç—å DDoS (max 5-10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö)
- [ ] TDLib thread-safety (–æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –Ω–∞ thread)

**Performance test:**
```swift
@Test(arguments: [10, 100, 1000])
func batchPerformance(count: Int) async throws {
    let start = ContinuousClock.now
    let results = try await fetchBatch(ids: Array(1...count))
    let duration = start.duration(to: .now)

    // Target: linear –∏–ª–∏ –ª—É—á—à–µ
    #expect(duration < .seconds(count / 20))
}
```

---

## üí° Pro Tips

**–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ bash:**
```bash
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π –≤—ã–≤–æ–¥
swift build 2>&1 | tail -20
swift test 2>&1 | head -50
git log --oneline -10

# –°–æ—Ö—Ä–∞–Ω—è–π –¥–ª–∏–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
swift build 2>&1 | tee /tmp/build.log | tail -20
```

**–ò—Å–ø–æ–ª—å–∑—É–π view_range –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∫–æ–¥–∞:**
–í–º–µ—Å—Ç–æ —á—Ç–µ–Ω–∏—è –≤—Å–µ–≥–æ —Ñ–∞–π–ª–∞ ‚Üí —á–∏—Ç–∞–π –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (view_range=[50, 100])

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ - –≤ TASKS.md:**
–ï—Å–ª–∏ –Ω–∞—à–ª–∏ –ø—Ä–æ–±–ª–µ–º—É –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–ª—è –±—É–¥—É—â–µ–≥–æ, –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É
