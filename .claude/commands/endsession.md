---
description: Подготовить проект к завершению сессии (TASKS, CHANGELOG, коммиты)
---

# End Session Command

Подготовить проект к завершению сессии разработки.

## Шаги выполнения:

### 1. Актуализация TASKS.md
- Прочитай TASKS.md
- Определи выполненные задачи (отметь ✅)
- Для незавершённых задач:
  - Опиши текущий статус (что сделано, что осталось)
  - Добавь контекст для следующей сессии
- Обнови файл

### 2. Запись в CHANGELOG.md
**Автоматическая генерация описания сессии:**

a) Проанализируй коммиты текущей сессии:
```bash
git log --oneline --since="6 hours ago"
git log --stat --since="6 hours ago"
```

b) Посмотри какие задачи обсуждались/выполнялись (из TASKS.md)

c) На основе этой информации составь краткую запись (2-4 строки):
- Что было реализовано/добавлено
- Ключевые изменения
- Известные TODO/issues если есть

d) Добавь через prepend (bash):
```bash
echo -e "$(cat <<'EOF'
## [$(date +%Y-%m-%d)] - Session Summary
- [автоматически сгенерированное описание]
- [ключевые изменения из коммитов]
- [TODO если есть]
EOF
)\n\n$(cat .claude/CHANGELOG.md)" > .claude/CHANGELOG.md
```

### 3. Коммиты
Проверь git status и создай отдельные коммиты:

**a) Sources коммит** (если есть изменения в Sources/):
```bash
git add Sources/
git commit -m "[type]: описание изменений

Детали изменений в исходном коде"
```

**b) Tests коммит** (если есть изменения в Tests/):
```bash
git add Tests/
git commit -m "test: описание тестов

Добавленные/обновлённые тесты"
```

**c) Docs коммит** (если есть изменения в .claude/, README, etc):
```bash
git add .claude/ *.md
git commit -m "docs: актуализация документации

- TASKS.md: текущий прогресс
- CHANGELOG.md: запись сессии"
```

### 4. Финальные проверки
- Запусти `git status` для проверки
- Спроси нужен ли `git push`
- Покажи summary: "Сессия завершена. X коммитов создано, TASKS/CHANGELOG обновлены"

## Важные правила:
- НЕ использовать "Co-Authored-By: Claude" (см. DEVELOPMENT.md)
- Коммиты на русском языке
- Если файлов много — группировать логично (не смешивать code/tests/docs)
- Перед коммитом — показать git diff и спросить подтверждение
